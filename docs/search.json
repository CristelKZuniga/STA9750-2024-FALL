[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Enjoy the ride. Welcome to my Portafolio.",
    "section": "",
    "text": "Good day, dear reader. My name is Cristel Zuniga, but you can call me Kassandra, which is my second and favorite name. I am currently pursuing a master’s degree in Business Analytics at Baruch College, part of CUNY in New York City, with an expected graduation date of January 2026.\nI have five years of experience in Supply Chain Management, with a focus over the past two years on data analysis in the supply side. One of my future goals is to build my own company as a business consultant, where we can work together to grow your business and compete with top companies.\nPlease contact me at: 1234 - 123 - 456 or: kzuniga"
  },
  {
    "objectID": "mp01.html",
    "href": "mp01.html",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems. By Cristel Zuniga",
    "section": "",
    "text": "Welcome to Mini-Project. The following analysis will examine the U.S. public transit systems, using data from the National Transit Database (NTD), I explore different aspects of the transit systems, from ridership trends and vehicle usage mode, to financial performance indicators such as farebox recovery ratios. The purpose of this analysis is to reveal the most efficient systems, and provide a comprehensive view of how different modes—such as buses, rail, and vanpool—are utilized across the country.\nThe database analyzed in this site has been substracted from: - 2022 Fare Revenue - Monthly Ridership - 2022 Operating Expenses\nHere is the code to download the database:\n\nif(!require(\"tidyverse\")) install.packages(\"tidyverse\")\n\nLoading required package: tidyverse\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n# Let's start with Fare Revenue\nlibrary(tidyverse)\nif(!file.exists(\"2022_fare_revenue.xlsx\")){\n  # This should work _in theory_ but in practice it's still a bit finicky\n  # If it doesn't work for you, download this file 'by hand' in your\n  # browser and save it as \"2022_fare_revenue.xlsx\" in your project\n  # directory.\n  download.file(\"http://www.transit.dot.gov/sites/fta.dot.gov/files/2024-04/2022%20Fare%20Revenue.xlsx\", \n                destfile=\"2022_fare_revenue.xlsx\", \n                quiet=FALSE, \n                method=\"wget\")\n}\nFARES &lt;- readxl::read_xlsx(\"2022_fare_revenue.xlsx\") |&gt;\n  select(-`State/Parent NTD ID`, \n         -`Reporter Type`,\n         -`Reporting Module`,\n         -`TOS`,\n         -`Passenger Paid Fares`,\n         -`Organization Paid Fares`) |&gt;\n  filter(`Expense Type` == \"Funds Earned During Period\") |&gt;\n  select(-`Expense Type`) |&gt;\n  group_by(`NTD ID`,       # Sum over different `TOS` for the same `Mode`\n           `Agency Name`,  # These are direct operated and sub-contracted \n           `Mode`) |&gt;      # of the same transit modality\n  # Not a big effect in most munis (significant DO\n  # tends to get rid of sub-contractors), but we'll sum\n  # to unify different passenger experiences\n  summarize(`Total Fares` = sum(`Total Fares`)) |&gt;\n  ungroup()\n\n`summarise()` has grouped output by 'NTD ID', 'Agency Name'. You can override\nusing the `.groups` argument.\n\n# Next, expenses\nif(!file.exists(\"2022_expenses.csv\")){\n  # This should work _in theory_ but in practice it's still a bit finicky\n  # If it doesn't work for you, download this file 'by hand' in your\n  # browser and save it as \"2022_expenses.csv\" in your project\n  # directory.\n  download.file(\"https://data.transportation.gov/api/views/dkxx-zjd6/rows.csv?date=20231102&accessType=DOWNLOAD&bom=true&format=true\", \n                destfile=\"2022_expenses.csv\", \n                quiet=FALSE, \n                method=\"wget\")\n}\nEXPENSES &lt;- readr::read_csv(\"2022_expenses.csv\") |&gt;\n  select(`NTD ID`, \n         `Agency`,\n         `Total`, \n         `Mode`) |&gt;\n  mutate(`NTD ID` = as.integer(`NTD ID`)) |&gt;\n  rename(Expenses = Total) |&gt;\n  group_by(`NTD ID`, `Mode`) |&gt;\n  summarize(Expenses = sum(Expenses)) |&gt;\n  ungroup()\n\nRows: 3744 Columns: 29\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (10): Agency, City, State, NTD ID, Organization Type, Reporter Type, UZA...\ndbl  (2): Report Year, UACE Code\nnum (10): Primary UZA Population, Agency VOMS, Mode VOMS, Vehicle Operations...\nlgl  (7): Vehicle Operations Questionable, Vehicle Maintenance Questionable,...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n`summarise()` has grouped output by 'NTD ID'. You can override using the `.groups` argument.\n\nFINANCIALS &lt;- inner_join(FARES, EXPENSES, join_by(`NTD ID`, `Mode`))\n\n# Monthly Transit Numbers\nlibrary(tidyverse)\nif(!file.exists(\"ridership.xlsx\")){\n  # This should work _in theory_ but in practice it's still a bit finicky\n  # If it doesn't work for you, download this file 'by hand' in your\n  # browser and save it as \"ridership.xlsx\" in your project\n  # directory.\n  download.file(\"https://www.transit.dot.gov/sites/fta.dot.gov/files/2024-09/July%202024%20Complete%20Monthly%20Ridership%20%28with%20adjustments%20and%20estimates%29_240903.xlsx\", \n                destfile=\"ridership.xlsx\", \n                quiet=FALSE, \n                method=\"wget\")\n}\nTRIPS &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet=\"UPT\") |&gt;\n  filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n  select(-`Legacy NTD ID`, \n         -`Reporter Type`, \n         -`Mode/Type of Service Status`, \n         -`UACE CD`, \n         -`TOS`) |&gt;\n  pivot_longer(-c(`NTD ID`:`3 Mode`), \n               names_to=\"month\", \n               values_to=\"UPT\") |&gt;\n  drop_na() |&gt;\n  mutate(month=my(month)) # Parse _m_onth _y_ear date specs\nMILES &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet=\"VRM\") |&gt;\n  filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n  select(-`Legacy NTD ID`, \n         -`Reporter Type`, \n         -`Mode/Type of Service Status`, \n         -`UACE CD`, \n         -`TOS`) |&gt;\n  pivot_longer(-c(`NTD ID`:`3 Mode`), \n               names_to=\"month\", \n               values_to=\"VRM\") |&gt;\n  drop_na() |&gt;\n  group_by(`NTD ID`, `Agency`, `UZA Name`, \n           `Mode`, `3 Mode`, month) |&gt;\n  summarize(VRM = sum(VRM)) |&gt;\n  ungroup() |&gt;\n  mutate(month=my(month)) # Parse _m_onth _y_ear date specs\n\n`summarise()` has grouped output by 'NTD ID', 'Agency', 'UZA Name', 'Mode', '3\nMode'. You can override using the `.groups` argument.\n\nUSAGE &lt;- inner_join(TRIPS, MILES) |&gt;\n  mutate(`NTD ID` = as.integer(`NTD ID`))\n\nJoining with `by = join_by(`NTD ID`, Agency, `UZA Name`, Mode, `3 Mode`,\nmonth)`\n\nif(!require(\"DT\")) install.packages(\"DT\")\n\nLoading required package: DT\n\nlibrary(DT)\n\nsample_n(USAGE, 1000) |&gt; \n  mutate(month=as.character(month)) |&gt; \n  DT::datatable()\n\n\n\n\nls()\n\n[1] \"EXPENSES\"   \"FARES\"      \"FINANCIALS\" \"MILES\"      \"TRIPS\"     \n[6] \"USAGE\"     \n\n\n\n\n##Task 1: Creating syntatic Names: USAGE|&gt;rename ( metro_area = \"UZA Name\") —\n##Task 2: Recoding the “Mode” column\n\nUSAGE &lt;- USAGE |&gt;\n  mutate(Mode = case_when(\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"YR\" ~\"Hybrid Rail\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"MG\" ~ \"Monorail/Automated Guideway\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"MB\" ~\"Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"DT\" ~ \"Demand Response - Taxi\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"JT\" ~ \"Jitney\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"TB\" ~\"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    TRUE ~ \"Unknown\"\n  ))\nhead(USAGE)\n\n# A tibble: 6 × 8\n  `NTD ID` Agency      `UZA Name`        Mode  `3 Mode` month         UPT    VRM\n     &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;             &lt;chr&gt; &lt;chr&gt;    &lt;date&gt;      &lt;dbl&gt;  &lt;dbl&gt;\n1        1 King County Seattle--Tacoma,… Dema… Bus      2002-01-01 135144 746158\n2        1 King County Seattle--Tacoma,… Dema… Bus      2002-02-01 127378 656324\n3        1 King County Seattle--Tacoma,… Dema… Bus      2002-03-01 136030 726578\n4        1 King County Seattle--Tacoma,… Dema… Bus      2002-04-01 142204 736975\n5        1 King County Seattle--Tacoma,… Dema… Bus      2002-05-01 144697 746158\n6        1 King County Seattle--Tacoma,… Dema… Bus      2002-06-01 131833 696633\n\nif(!require(\"DT\")) install.packages(\"DT\")\nlibrary(DT)\n\nsample_n(USAGE, 1000) |&gt; \n  mutate(month=as.character(month)) |&gt; \n  DT::datatable()\n\n\n\n\nif(!require(\"DT\")) install.packages(\"DT\")\nlibrary(DT)\nlibrary(dplyr)\n\nUSAGE |&gt; \n  sample_n(1000) |&gt; \n  mutate(month = as.character(month)) |&gt; \n  select(-`NTD ID`, -starts_with(\"Mode\")) |&gt; \n  rename(\n    `Unlinked Passenger Trips` = UPT,\n    `Vehicle Revenue Miles` = VRM,\n     metro_area = 'UZA Name'\n  ) |&gt; \n  DT::datatable()\n\n\n\n\ncolnames(USAGE)\n\n[1] \"NTD ID\"   \"Agency\"   \"UZA Name\" \"Mode\"     \"3 Mode\"   \"month\"    \"UPT\"     \n[8] \"VRM\"     \n\n\n##Task 3: Answering Instructor Specified Questions with dplyr\n1. Question 1: What transit agency had the most total VRM in our data set?\n\nUSAGE |&gt; \n  group_by(Agency) |&gt; \n  summarize(total_agency_VRM = sum(VRM, na.rm = TRUE)) |&gt; \n  arrange(desc(total_agency_VRM)) |&gt;    # Sort by 'total_agency_VRM' in descending order\n  slice_head(n = 5)\n\n# A tibble: 5 × 2\n  Agency                                                   total_agency_VRM\n  &lt;chr&gt;                                                               &lt;dbl&gt;\n1 MTA New York City Transit                                     10832855350\n2 New Jersey Transit Corporation                                 5645525525\n3 Los Angeles County Metropolitan Transportation Authority       4354016659\n4 Washington Metropolitan Area Transit Authority                 2821950701\n5 Chicago Transit Authority                                      2806202144\n\n\nR1=The transit agency that has the largest total Vehicle Revenue Miles is the MTA New York City Transit, with a total of 10,832,855,350 miles.\n2. Question 2: What transit mode had the most total VRM in our data set?\n\nUSAGE |&gt; \n  group_by(`3 Mode`) |&gt; \n  summarize(total_agency_VRM = sum(VRM, na.rm = TRUE)) |&gt; \n  arrange(desc(total_agency_VRM)) |&gt;    # Sort by 'total_agency_VRM' in descending order\n  slice_head(n = 5)\n\n# A tibble: 3 × 2\n  `3 Mode` total_agency_VRM\n  &lt;chr&gt;               &lt;dbl&gt;\n1 Bus           73172836312\n2 Rail          23842376168\n3 Ferry            65589783\n\n\nR2 = The transportation mode with the largest Vehicle Revenue Miles in the dataset is the Bus, with a total of 73,172,836,312 miles.\n3. Question 3: How many trips were taken on the NYC Subway (Heavy Rail) in May 2024?\n\nUSAGE |&gt;\n  filter(Agency == \"MTA New York City Transit\",\n         Mode == \"Heavy Rail\",\n         year (month) == 2024, \n         month(month) == 5) |&gt;\n  summarize(total_trips = sum(UPT, na.rm = TRUE))\n\n# A tibble: 1 × 1\n  total_trips\n        &lt;dbl&gt;\n1   180458819\n\n\nR3= During the month of May 2024,the MTA New York City Transit completed 180,458,819 rides.\n\ntable(USAGE$Mode)\n\n\n             Aerial Tramway             Alaska Railroad \n                        133                         223 \n                        Bus           Bus Rapid Transit \n                     113187                        1703 \n                  Cable Car                Commuter Bus \n                        271                       10406 \n              Commuter Rail             Demand Response \n                       6035                      115701 \n                  Ferryboat                  Heavy Rail \n                       4412                        4017 \n                Hybrid Rail              Inclined Plane \n                        695                         811 \n                 Light Rail Monorail/Automated Guideway \n                       5841                         899 \n                    Publico              Streetcar Rail \n                        270                        2487 \n                 Trolleybus                     Vanpool \n                       1033                       12886 \n\n# Get the distinct modes of transportation for a specific agency\nUSAGE |&gt;\n  filter(Agency == \"MTA New York City Transit\") |&gt;\n  distinct(`Mode`)\n\n# A tibble: 5 × 1\n  Mode             \n  &lt;chr&gt;            \n1 Commuter Bus     \n2 Demand Response  \n3 Heavy Rail       \n4 Bus              \n5 Bus Rapid Transit\n\nUSAGE |&gt;\n  filter(`3 Mode`== \"Heavy Rail\") |&gt;\n  distinct(Agency)\n\n# A tibble: 0 × 1\n# ℹ 1 variable: Agency &lt;chr&gt;\n\nUSAGE |&gt;\n  distinct(`3 Mode`)\n\n# A tibble: 3 × 1\n  `3 Mode`\n  &lt;chr&gt;   \n1 Bus     \n2 Ferry   \n3 Rail    \n\n\n5. Question 5: How much did NYC subway ridership fall between April 2019 and April 2020?\n\nridership_diff &lt;- USAGE |&gt;\n  filter(Agency == \"MTA New York City Transit\", \n         Mode == \"Heavy Rail\", \n         month(month) == 4, \n         year(month) %in% c(2019, 2020)) |&gt;\n  summarize(\n    total_trips_2019 = sum(ifelse(year(month) == 2019, UPT, 0), na.rm = TRUE),\n    total_trips_2020 = sum(ifelse(year(month) == 2020, UPT, 0), na.rm = TRUE)\n  ) |&gt;\n  mutate(ridership_fall = total_trips_2019 - total_trips_2020)\n\nridership_diff\n\n# A tibble: 1 × 3\n  total_trips_2019 total_trips_2020 ridership_fall\n             &lt;dbl&gt;            &lt;dbl&gt;          &lt;dbl&gt;\n1        232223929         20254269      211969660\n\n\nR5= The difference in rides between April 2019 and April 2020 on the MTA NYC Subway is by 211,969,660 rides, and I think on o the main reasons was the global pandemic of Covid 19.\n\n\n\nA) What is the increase on rides from December 2019 vs. December 2022, by the Bus in all the agencies?\n\nridership_diff &lt;- USAGE |&gt;\n  filter(Mode == \"Bus\", \n         month(month) == 12, \n         year(month) %in% c(2020, 2022)) |&gt;\n  summarize(\n    total_trips_2020 = sum(ifelse(year(month) == 2020, UPT, 0), na.rm = TRUE),\n    total_trips_2022 = sum(ifelse(year(month) == 2022, UPT, 0), na.rm = TRUE)\n  ) |&gt;\n  mutate(ridership_fall = total_trips_2022 - total_trips_2020)\n\nridership_diff\n\n# A tibble: 1 × 3\n  total_trips_2020 total_trips_2022 ridership_fall\n             &lt;dbl&gt;            &lt;dbl&gt;          &lt;dbl&gt;\n1        161846424        236042280       74195856\n\n\na) R= The increase of rides in bus in all the US Transportation agencies increased from 161,846,424 in 2020 to 236,042,280 in 2022. Giving as a result a increase of 74,195,856 rides more.\nB) Name the top 5 transportation agencies based on the unlinked passenger trips (all modes included).\n\nUSAGE |&gt; \n  group_by(`Agency`) |&gt; \n  summarize(total_agency_UPT = sum(UPT, na.rm = TRUE)) |&gt; \n  arrange(desc(total_agency_UPT)) |&gt;\n  slice_head(n = 5)\n\n# A tibble: 5 × 2\n  Agency                                                   total_agency_UPT\n  &lt;chr&gt;                                                               &lt;dbl&gt;\n1 MTA New York City Transit                                     69101730780\n2 Chicago Transit Authority                                     10106154755\n3 Los Angeles County Metropolitan Transportation Authority       9193172939\n4 Washington Metropolitan Area Transit Authority                 7997911245\n5 Massachusetts Bay Transportation Authority                     7431129981\n\n\nB) R= The leader of the category with the highest rate of passenger trips in the history is the MTA NYC Transit.\nC) Compare if the top five agencies based on UTP is still the same as if you compare it with the VRM:\n\nUSAGE |&gt; \n  group_by(`Agency`) |&gt; \n  summarize(total_agency_VRM2 = sum(VRM, na.rm = TRUE)) |&gt; \n  arrange(desc(total_agency_VRM2)) |&gt;\n  slice_head(n = 5)\n\n# A tibble: 5 × 2\n  Agency                                                   total_agency_VRM2\n  &lt;chr&gt;                                                                &lt;dbl&gt;\n1 MTA New York City Transit                                      10832855350\n2 New Jersey Transit Corporation                                  5645525525\n3 Los Angeles County Metropolitan Transportation Authority        4354016659\n4 Washington Metropolitan Area Transit Authority                  2821950701\n5 Chicago Transit Authority                                       2806202144\n\n\nc) R= MTA NYC Transit remains in the first position, but in second place appear an agency that wasn’t in the top five by UPT, this Agency is New Jersey Transit Corporation.\n\n\n\n\nnames(USAGE)\n\n[1] \"NTD ID\"   \"Agency\"   \"UZA Name\" \"Mode\"     \"3 Mode\"   \"month\"    \"UPT\"     \n[8] \"VRM\"     \n\nUSAGE_2022_ANNUAL &lt;- USAGE |&gt;\n  filter(year(month) == 2022) |&gt;\n  group_by(`NTD ID`, Agency, `UZA Name`, Mode) |&gt;\n  summarize(\n    UPT = sum(UPT, na.rm = TRUE),\n    VRM = sum(VRM, na.rm = TRUE)\n  ) %&gt;%\n  ungroup()\n\n`summarise()` has grouped output by 'NTD ID', 'Agency', 'UZA Name'. You can\noverride using the `.groups` argument.\n\nprint(USAGE_2022_ANNUAL)\n\n# A tibble: 1,141 × 6\n   `NTD ID` Agency                                `UZA Name` Mode     UPT    VRM\n      &lt;int&gt; &lt;chr&gt;                                 &lt;chr&gt;      &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n 1        1 King County                           Seattle--… Bus   5.40e7 6.16e7\n 2        1 King County                           Seattle--… Dema… 6.63e5 1.29e7\n 3        1 King County                           Seattle--… Ferr… 4.00e5 5.12e4\n 4        1 King County                           Seattle--… Stre… 1.12e6 1.80e5\n 5        1 King County                           Seattle--… Trol… 9.58e6 2.64e6\n 6        1 King County                           Seattle--… Vanp… 7.03e5 4.41e6\n 7        2 Spokane Transit Authority             Spokane, … Bus   6.60e6 6.49e6\n 8        2 Spokane Transit Authority             Spokane, … Dema… 3.10e5 4.04e6\n 9        2 Spokane Transit Authority             Spokane, … Vanp… 9.06e4 9.06e5\n10        3 Pierce County Transportation Benefit… Seattle--… Bus   4.95e6 4.23e6\n# ℹ 1,131 more rows\n\ncolnames(USAGE)\n\n[1] \"NTD ID\"   \"Agency\"   \"UZA Name\" \"Mode\"     \"3 Mode\"   \"month\"    \"UPT\"     \n[8] \"VRM\"     \n\nFINANCIALS &lt;- FINANCIALS |&gt;\n  mutate(Mode = case_when(\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"MG\" ~ \"Monorail/Automated Guideway\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"DT\" ~ \"Demand Response - Taxi\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"JT\" ~ \"Jitney\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    TRUE ~ \"Unknown\"\n  ))\n\nhead(FINANCIALS)\n\n# A tibble: 6 × 5\n  `NTD ID` `Agency Name`                           Mode   `Total Fares` Expenses\n     &lt;dbl&gt; &lt;chr&gt;                                   &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;\n1        1 King County Department of Metro Transit Commu…       5216912   0     \n2        1 King County Department of Metro Transit Deman…        832327   6.05e7\n3        1 King County Department of Metro Transit Ferry…       1715265   8.90e6\n4        1 King County Department of Metro Transit Light…      29386480   0     \n5        1 King County Department of Metro Transit Bus         56846337   6.72e8\n6        1 King County Department of Metro Transit Stree…        588495   1.25e7\n\ncolnames(USAGE_2022_ANNUAL)\n\n[1] \"NTD ID\"   \"Agency\"   \"UZA Name\" \"Mode\"     \"UPT\"      \"VRM\"     \n\ncolnames(FINANCIALS)\n\n[1] \"NTD ID\"      \"Agency Name\" \"Mode\"        \"Total Fares\" \"Expenses\"   \n\ndistinct(USAGE_2022_ANNUAL)\n\n# A tibble: 1,141 × 6\n   `NTD ID` Agency                                `UZA Name` Mode     UPT    VRM\n      &lt;int&gt; &lt;chr&gt;                                 &lt;chr&gt;      &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n 1        1 King County                           Seattle--… Bus   5.40e7 6.16e7\n 2        1 King County                           Seattle--… Dema… 6.63e5 1.29e7\n 3        1 King County                           Seattle--… Ferr… 4.00e5 5.12e4\n 4        1 King County                           Seattle--… Stre… 1.12e6 1.80e5\n 5        1 King County                           Seattle--… Trol… 9.58e6 2.64e6\n 6        1 King County                           Seattle--… Vanp… 7.03e5 4.41e6\n 7        2 Spokane Transit Authority             Spokane, … Bus   6.60e6 6.49e6\n 8        2 Spokane Transit Authority             Spokane, … Dema… 3.10e5 4.04e6\n 9        2 Spokane Transit Authority             Spokane, … Vanp… 9.06e4 9.06e5\n10        3 Pierce County Transportation Benefit… Seattle--… Bus   4.95e6 4.23e6\n# ℹ 1,131 more rows\n\ndistinct(FINANCIALS)\n\n# A tibble: 1,173 × 5\n   `NTD ID` `Agency Name`                           Mode  `Total Fares` Expenses\n      &lt;dbl&gt; &lt;chr&gt;                                   &lt;chr&gt;         &lt;dbl&gt;    &lt;dbl&gt;\n 1        1 King County Department of Metro Transit Comm…       5216912   0     \n 2        1 King County Department of Metro Transit Dema…        832327   6.05e7\n 3        1 King County Department of Metro Transit Ferr…       1715265   8.90e6\n 4        1 King County Department of Metro Transit Ligh…      29386480   0     \n 5        1 King County Department of Metro Transit Bus        56846337   6.72e8\n 6        1 King County Department of Metro Transit Stre…        588495   1.25e7\n 7        1 King County Department of Metro Transit Trol…      10123486   8.42e7\n 8        1 King County Department of Metro Transit Vanp…       5484481   8.91e6\n 9        2 Spokane Transit Authority               Dema…        531284   1.80e7\n10        2 Spokane Transit Authority               Bus         6135110   7.53e7\n# ℹ 1,163 more rows\n\nUSAGE_AND_FINANCIALS &lt;- left_join(USAGE_2022_ANNUAL, \n                                  FINANCIALS, \n                                  join_by(`NTD ID`, Mode)) |&gt;\n  drop_na()\nUSAGE_AND_FINANCIALS\n\n# A tibble: 1,132 × 9\n   `NTD ID` Agency    `UZA Name` Mode     UPT    VRM `Agency Name` `Total Fares`\n      &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;                 &lt;dbl&gt;\n 1        1 King Cou… Seattle--… Bus   5.40e7 6.16e7 King County …      56846337\n 2        1 King Cou… Seattle--… Dema… 6.63e5 1.29e7 King County …        832327\n 3        1 King Cou… Seattle--… Ferr… 4.00e5 5.12e4 King County …       1715265\n 4        1 King Cou… Seattle--… Stre… 1.12e6 1.80e5 King County …        588495\n 5        1 King Cou… Seattle--… Trol… 9.58e6 2.64e6 King County …      10123486\n 6        1 King Cou… Seattle--… Vanp… 7.03e5 4.41e6 King County …       5484481\n 7        2 Spokane … Spokane, … Bus   6.60e6 6.49e6 Spokane Tran…       6135110\n 8        2 Spokane … Spokane, … Dema… 3.10e5 4.04e6 Spokane Tran…        531284\n 9        2 Spokane … Spokane, … Vanp… 9.06e4 9.06e5 Spokane Tran…        247718\n10        3 Pierce C… Seattle--… Bus   4.95e6 4.23e6 Pierce Count…       4356831\n# ℹ 1,122 more rows\n# ℹ 1 more variable: Expenses &lt;dbl&gt;\n\ncolnames(USAGE_AND_FINANCIALS)\n\n[1] \"NTD ID\"      \"Agency\"      \"UZA Name\"    \"Mode\"        \"UPT\"        \n[6] \"VRM\"         \"Agency Name\" \"Total Fares\" \"Expenses\"   \n\n\n##Task 6: Farebox Recovery Among Major Systems\nUsing the USAGE_AND_FINANCIALS table, answer the following questions:\n# 1.Which transit system (agency and mode) had the most UPT in 2022?\nUSAGE_AND_FINANCIALS|&gt; group_by(Agency, Mode) |&gt; summarize(total_UPT = sum(UPT, na.rm = TRUE)) |&gt; ungroup() |&gt; arrange(desc(total_UPT)) |&gt; slice_head(n = 1) #R1. The transit system that had the most UPT in 2022 was the MTA New York City Transit, #by the Heavy Rail mode, with a total of 1,793,073,801 trips.\n# 2.Which transit system (agency and mode) had the highest farebox recovery, #defined as the highest ratio of Total Fares to Expenses? USAGE_AND_FINANCIALS |&gt; group_by(Agency, Mode) |&gt; summarize( total_fares = sum(Total Fares, na.rm = TRUE), total_expenses = sum(Expenses, na.rm = TRUE) ) |&gt; mutate(farebox_recovery_ratio = total_fares / total_expenses) |&gt; ungroup() |&gt; arrange(desc(farebox_recovery_ratio)) |&gt; slice_head(n = 1)\n\n#R2 = The Transit System with the highest recovery ratio is The Transit Authority of Central Kentuchy, by Vanpool #with a recovery Ratio of \\$2.38 usd.\n\n\\# 3.Which transit system (agency and mode) has the lowest expenses per UPT? \\`\\`\\`{R} USAGE_AND_FINANCIALS\\|\\&gt; group_by(Agency, Mode) \\|\\&gt; summarize( total_expenses = sum(Expenses, na.rm = TRUE), total_UPT = sum(UPT, na.rm = TRUE)) \\|\\&gt; filter(total_UPT \\&gt;= 400000) \\|\\&gt; mutate (expenses_per_UPT = total_expenses/total_UPT)\\|\\&gt; ungroup() \\|\\&gt; arrange(expenses_per_UPT) \\|\\&gt; slice_head(n = 1)\n\n#R3. North Carolina State University is the agency with the lowest expenses per UPT, on the bus mode, #the expenses per UPT is only $1.18usdd.\n# 4.Which transit system (agency and mode) has the highest total fares per UPT?\n\nUSAGE_AND_FINANCIALS|&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(\n    total_fares1 = sum(`Total Fares`, na.rm = TRUE),\n    total_UPT = sum(UPT, na.rm = TRUE)) |&gt;\n  \n  mutate (total_fares_per_UPT = total_fares1/total_UPT)|&gt;\n  ungroup() |&gt;\n  arrange(desc(total_fares_per_UPT)) |&gt;\n  slice_head(n = 1)\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 1 × 5\n  Agency                Mode          total_fares1 total_UPT total_fares_per_UPT\n  &lt;chr&gt;                 &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;               &lt;dbl&gt;\n1 Altoona Metro Transit Demand Respo…        17163        26                660.\n\n\n#R4. The highest total fares per UPT is the Agency “Altoona Metro Transit” with the modality #of “Demand Response”, the total fares per UPT is $660 USD.\n# 5.Which transit system (agency and mode) has the lowest expenses per VRM? ``{R} USAGE_AND_FINANCIALS|&gt;   group_by(Agency, Mode) |&gt;   summarize(     total_expenses = sum(Expenses`, na.rm = TRUE), total_VRM = sum(VRM, na.rm = TRUE), total_UPT= sum(UPT, na.rm=TRUE)) |&gt; filter(total_UPT &gt;= 400000) |&gt; mutate (total_expenses_per_VRM = total_expenses/total_VRM)|&gt; ungroup() |&gt; arrange((total_expenses_per_VRM)) |&gt; slice_head(n = 1)\n#R5. Metropolitan Transportation Comission, Vanpool mode, is the transit system with the lowest expenses per VRM, with only $0.445USD\n\n\n  # 6.Which transit system (agency and mode) has the highest total fares per VRM?\n::: {.cell}\n\n```{.r .cell-code}\nUSAGE_AND_FINANCIALS|&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(\n    total_fares1 = sum(`Total Fares`, na.rm = TRUE),\n    total_VRM = sum(VRM, na.rm = TRUE)) |&gt;\n\n  mutate (total_fares_per_VRM = total_fares1/total_VRM)|&gt;\n  ungroup() |&gt;\n  arrange(desc(total_fares_per_VRM)) |&gt;\n  slice_head(n = 1)\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 1 × 5\n  Agency                        Mode  total_fares1 total_VRM total_fares_per_VRM\n  &lt;chr&gt;                         &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;               &lt;dbl&gt;\n1 Chicago Water Taxi (Wendella) Ferr…       142473       600                237.\n\n:::\n#R6. The highest total fares per VRM on transit agencies in the US is the Ferryboat from Chicago Water Taxi (Wendella), #the total fare per VRM is $237USD.\n`colnames(USAGE_AND_FINANCIALS)\n#Last question: The most efficient transit system in the country, in my opinion, is The Transit Authority of Central Kentucky by #Vanpool, which boasts the highest recovery ratio in the country at $2.38 USD. My basis for declaring this system efficient #is its high recovery cost, as indicated by the ratio, which could lead one to think that this transit #system is profitable. Nevertheless, Vanpool is a mode of transportation that could be slow due to external factors, such as traffic, accidents, and other road conditions."
  },
  {
    "objectID": "mp01.html#development-and-tasks",
    "href": "mp01.html#development-and-tasks",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems. By Cristel Zuniga",
    "section": "",
    "text": "##Task 1: Creating syntatic Names: USAGE|&gt;rename ( metro_area = \"UZA Name\") —\n##Task 2: Recoding the “Mode” column\n\nUSAGE &lt;- USAGE |&gt;\n  mutate(Mode = case_when(\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"YR\" ~\"Hybrid Rail\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"MG\" ~ \"Monorail/Automated Guideway\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"MB\" ~\"Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"DT\" ~ \"Demand Response - Taxi\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"JT\" ~ \"Jitney\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"TB\" ~\"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    TRUE ~ \"Unknown\"\n  ))\nhead(USAGE)\n\n# A tibble: 6 × 8\n  `NTD ID` Agency      `UZA Name`        Mode  `3 Mode` month         UPT    VRM\n     &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;             &lt;chr&gt; &lt;chr&gt;    &lt;date&gt;      &lt;dbl&gt;  &lt;dbl&gt;\n1        1 King County Seattle--Tacoma,… Dema… Bus      2002-01-01 135144 746158\n2        1 King County Seattle--Tacoma,… Dema… Bus      2002-02-01 127378 656324\n3        1 King County Seattle--Tacoma,… Dema… Bus      2002-03-01 136030 726578\n4        1 King County Seattle--Tacoma,… Dema… Bus      2002-04-01 142204 736975\n5        1 King County Seattle--Tacoma,… Dema… Bus      2002-05-01 144697 746158\n6        1 King County Seattle--Tacoma,… Dema… Bus      2002-06-01 131833 696633\n\nif(!require(\"DT\")) install.packages(\"DT\")\nlibrary(DT)\n\nsample_n(USAGE, 1000) |&gt; \n  mutate(month=as.character(month)) |&gt; \n  DT::datatable()\n\n\n\n\nif(!require(\"DT\")) install.packages(\"DT\")\nlibrary(DT)\nlibrary(dplyr)\n\nUSAGE |&gt; \n  sample_n(1000) |&gt; \n  mutate(month = as.character(month)) |&gt; \n  select(-`NTD ID`, -starts_with(\"Mode\")) |&gt; \n  rename(\n    `Unlinked Passenger Trips` = UPT,\n    `Vehicle Revenue Miles` = VRM,\n     metro_area = 'UZA Name'\n  ) |&gt; \n  DT::datatable()\n\n\n\n\ncolnames(USAGE)\n\n[1] \"NTD ID\"   \"Agency\"   \"UZA Name\" \"Mode\"     \"3 Mode\"   \"month\"    \"UPT\"     \n[8] \"VRM\"     \n\n\n##Task 3: Answering Instructor Specified Questions with dplyr\n1. Question 1: What transit agency had the most total VRM in our data set?\n\nUSAGE |&gt; \n  group_by(Agency) |&gt; \n  summarize(total_agency_VRM = sum(VRM, na.rm = TRUE)) |&gt; \n  arrange(desc(total_agency_VRM)) |&gt;    # Sort by 'total_agency_VRM' in descending order\n  slice_head(n = 5)\n\n# A tibble: 5 × 2\n  Agency                                                   total_agency_VRM\n  &lt;chr&gt;                                                               &lt;dbl&gt;\n1 MTA New York City Transit                                     10832855350\n2 New Jersey Transit Corporation                                 5645525525\n3 Los Angeles County Metropolitan Transportation Authority       4354016659\n4 Washington Metropolitan Area Transit Authority                 2821950701\n5 Chicago Transit Authority                                      2806202144\n\n\nR1=The transit agency that has the largest total Vehicle Revenue Miles is the MTA New York City Transit, with a total of 10,832,855,350 miles.\n2. Question 2: What transit mode had the most total VRM in our data set?\n\nUSAGE |&gt; \n  group_by(`3 Mode`) |&gt; \n  summarize(total_agency_VRM = sum(VRM, na.rm = TRUE)) |&gt; \n  arrange(desc(total_agency_VRM)) |&gt;    # Sort by 'total_agency_VRM' in descending order\n  slice_head(n = 5)\n\n# A tibble: 3 × 2\n  `3 Mode` total_agency_VRM\n  &lt;chr&gt;               &lt;dbl&gt;\n1 Bus           73172836312\n2 Rail          23842376168\n3 Ferry            65589783\n\n\nR2 = The transportation mode with the largest Vehicle Revenue Miles in the dataset is the Bus, with a total of 73,172,836,312 miles.\n3. Question 3: How many trips were taken on the NYC Subway (Heavy Rail) in May 2024?\n\nUSAGE |&gt;\n  filter(Agency == \"MTA New York City Transit\",\n         Mode == \"Heavy Rail\",\n         year (month) == 2024, \n         month(month) == 5) |&gt;\n  summarize(total_trips = sum(UPT, na.rm = TRUE))\n\n# A tibble: 1 × 1\n  total_trips\n        &lt;dbl&gt;\n1   180458819\n\n\nR3= During the month of May 2024,the MTA New York City Transit completed 180,458,819 rides.\n\ntable(USAGE$Mode)\n\n\n             Aerial Tramway             Alaska Railroad \n                        133                         223 \n                        Bus           Bus Rapid Transit \n                     113187                        1703 \n                  Cable Car                Commuter Bus \n                        271                       10406 \n              Commuter Rail             Demand Response \n                       6035                      115701 \n                  Ferryboat                  Heavy Rail \n                       4412                        4017 \n                Hybrid Rail              Inclined Plane \n                        695                         811 \n                 Light Rail Monorail/Automated Guideway \n                       5841                         899 \n                    Publico              Streetcar Rail \n                        270                        2487 \n                 Trolleybus                     Vanpool \n                       1033                       12886 \n\n# Get the distinct modes of transportation for a specific agency\nUSAGE |&gt;\n  filter(Agency == \"MTA New York City Transit\") |&gt;\n  distinct(`Mode`)\n\n# A tibble: 5 × 1\n  Mode             \n  &lt;chr&gt;            \n1 Commuter Bus     \n2 Demand Response  \n3 Heavy Rail       \n4 Bus              \n5 Bus Rapid Transit\n\nUSAGE |&gt;\n  filter(`3 Mode`== \"Heavy Rail\") |&gt;\n  distinct(Agency)\n\n# A tibble: 0 × 1\n# ℹ 1 variable: Agency &lt;chr&gt;\n\nUSAGE |&gt;\n  distinct(`3 Mode`)\n\n# A tibble: 3 × 1\n  `3 Mode`\n  &lt;chr&gt;   \n1 Bus     \n2 Ferry   \n3 Rail    \n\n\n5. Question 5: How much did NYC subway ridership fall between April 2019 and April 2020?\n\nridership_diff &lt;- USAGE |&gt;\n  filter(Agency == \"MTA New York City Transit\", \n         Mode == \"Heavy Rail\", \n         month(month) == 4, \n         year(month) %in% c(2019, 2020)) |&gt;\n  summarize(\n    total_trips_2019 = sum(ifelse(year(month) == 2019, UPT, 0), na.rm = TRUE),\n    total_trips_2020 = sum(ifelse(year(month) == 2020, UPT, 0), na.rm = TRUE)\n  ) |&gt;\n  mutate(ridership_fall = total_trips_2019 - total_trips_2020)\n\nridership_diff\n\n# A tibble: 1 × 3\n  total_trips_2019 total_trips_2020 ridership_fall\n             &lt;dbl&gt;            &lt;dbl&gt;          &lt;dbl&gt;\n1        232223929         20254269      211969660\n\n\nR5= The difference in rides between April 2019 and April 2020 on the MTA NYC Subway is by 211,969,660 rides, and I think on o the main reasons was the global pandemic of Covid 19."
  },
  {
    "objectID": "mp01.html#task-4-explore-and-analyze-find-three-more-interesting-transit-facts-in-this-data-other-than-those-above.",
    "href": "mp01.html#task-4-explore-and-analyze-find-three-more-interesting-transit-facts-in-this-data-other-than-those-above.",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems. By Cristel Zuniga",
    "section": "",
    "text": "A) What is the increase on rides from December 2019 vs. December 2022, by the Bus in all the agencies?\n\nridership_diff &lt;- USAGE |&gt;\n  filter(Mode == \"Bus\", \n         month(month) == 12, \n         year(month) %in% c(2020, 2022)) |&gt;\n  summarize(\n    total_trips_2020 = sum(ifelse(year(month) == 2020, UPT, 0), na.rm = TRUE),\n    total_trips_2022 = sum(ifelse(year(month) == 2022, UPT, 0), na.rm = TRUE)\n  ) |&gt;\n  mutate(ridership_fall = total_trips_2022 - total_trips_2020)\n\nridership_diff\n\n# A tibble: 1 × 3\n  total_trips_2020 total_trips_2022 ridership_fall\n             &lt;dbl&gt;            &lt;dbl&gt;          &lt;dbl&gt;\n1        161846424        236042280       74195856\n\n\na) R= The increase of rides in bus in all the US Transportation agencies increased from 161,846,424 in 2020 to 236,042,280 in 2022. Giving as a result a increase of 74,195,856 rides more.\nB) Name the top 5 transportation agencies based on the unlinked passenger trips (all modes included).\n\nUSAGE |&gt; \n  group_by(`Agency`) |&gt; \n  summarize(total_agency_UPT = sum(UPT, na.rm = TRUE)) |&gt; \n  arrange(desc(total_agency_UPT)) |&gt;\n  slice_head(n = 5)\n\n# A tibble: 5 × 2\n  Agency                                                   total_agency_UPT\n  &lt;chr&gt;                                                               &lt;dbl&gt;\n1 MTA New York City Transit                                     69101730780\n2 Chicago Transit Authority                                     10106154755\n3 Los Angeles County Metropolitan Transportation Authority       9193172939\n4 Washington Metropolitan Area Transit Authority                 7997911245\n5 Massachusetts Bay Transportation Authority                     7431129981\n\n\nB) R= The leader of the category with the highest rate of passenger trips in the history is the MTA NYC Transit.\nC) Compare if the top five agencies based on UTP is still the same as if you compare it with the VRM:\n\nUSAGE |&gt; \n  group_by(`Agency`) |&gt; \n  summarize(total_agency_VRM2 = sum(VRM, na.rm = TRUE)) |&gt; \n  arrange(desc(total_agency_VRM2)) |&gt;\n  slice_head(n = 5)\n\n# A tibble: 5 × 2\n  Agency                                                   total_agency_VRM2\n  &lt;chr&gt;                                                                &lt;dbl&gt;\n1 MTA New York City Transit                                      10832855350\n2 New Jersey Transit Corporation                                  5645525525\n3 Los Angeles County Metropolitan Transportation Authority        4354016659\n4 Washington Metropolitan Area Transit Authority                  2821950701\n5 Chicago Transit Authority                                       2806202144\n\n\nc) R= MTA NYC Transit remains in the first position, but in second place appear an agency that wasn’t in the top five by UPT, this Agency is New Jersey Transit Corporation."
  },
  {
    "objectID": "mp01.html#task-5-table-summarization",
    "href": "mp01.html#task-5-table-summarization",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems. By Cristel Zuniga",
    "section": "",
    "text": "names(USAGE)\n\n[1] \"NTD ID\"   \"Agency\"   \"UZA Name\" \"Mode\"     \"3 Mode\"   \"month\"    \"UPT\"     \n[8] \"VRM\"     \n\nUSAGE_2022_ANNUAL &lt;- USAGE |&gt;\n  filter(year(month) == 2022) |&gt;\n  group_by(`NTD ID`, Agency, `UZA Name`, Mode) |&gt;\n  summarize(\n    UPT = sum(UPT, na.rm = TRUE),\n    VRM = sum(VRM, na.rm = TRUE)\n  ) %&gt;%\n  ungroup()\n\n`summarise()` has grouped output by 'NTD ID', 'Agency', 'UZA Name'. You can\noverride using the `.groups` argument.\n\nprint(USAGE_2022_ANNUAL)\n\n# A tibble: 1,141 × 6\n   `NTD ID` Agency                                `UZA Name` Mode     UPT    VRM\n      &lt;int&gt; &lt;chr&gt;                                 &lt;chr&gt;      &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n 1        1 King County                           Seattle--… Bus   5.40e7 6.16e7\n 2        1 King County                           Seattle--… Dema… 6.63e5 1.29e7\n 3        1 King County                           Seattle--… Ferr… 4.00e5 5.12e4\n 4        1 King County                           Seattle--… Stre… 1.12e6 1.80e5\n 5        1 King County                           Seattle--… Trol… 9.58e6 2.64e6\n 6        1 King County                           Seattle--… Vanp… 7.03e5 4.41e6\n 7        2 Spokane Transit Authority             Spokane, … Bus   6.60e6 6.49e6\n 8        2 Spokane Transit Authority             Spokane, … Dema… 3.10e5 4.04e6\n 9        2 Spokane Transit Authority             Spokane, … Vanp… 9.06e4 9.06e5\n10        3 Pierce County Transportation Benefit… Seattle--… Bus   4.95e6 4.23e6\n# ℹ 1,131 more rows\n\ncolnames(USAGE)\n\n[1] \"NTD ID\"   \"Agency\"   \"UZA Name\" \"Mode\"     \"3 Mode\"   \"month\"    \"UPT\"     \n[8] \"VRM\"     \n\nFINANCIALS &lt;- FINANCIALS |&gt;\n  mutate(Mode = case_when(\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"MG\" ~ \"Monorail/Automated Guideway\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"DT\" ~ \"Demand Response - Taxi\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"JT\" ~ \"Jitney\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    TRUE ~ \"Unknown\"\n  ))\n\nhead(FINANCIALS)\n\n# A tibble: 6 × 5\n  `NTD ID` `Agency Name`                           Mode   `Total Fares` Expenses\n     &lt;dbl&gt; &lt;chr&gt;                                   &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;\n1        1 King County Department of Metro Transit Commu…       5216912   0     \n2        1 King County Department of Metro Transit Deman…        832327   6.05e7\n3        1 King County Department of Metro Transit Ferry…       1715265   8.90e6\n4        1 King County Department of Metro Transit Light…      29386480   0     \n5        1 King County Department of Metro Transit Bus         56846337   6.72e8\n6        1 King County Department of Metro Transit Stree…        588495   1.25e7\n\ncolnames(USAGE_2022_ANNUAL)\n\n[1] \"NTD ID\"   \"Agency\"   \"UZA Name\" \"Mode\"     \"UPT\"      \"VRM\"     \n\ncolnames(FINANCIALS)\n\n[1] \"NTD ID\"      \"Agency Name\" \"Mode\"        \"Total Fares\" \"Expenses\"   \n\ndistinct(USAGE_2022_ANNUAL)\n\n# A tibble: 1,141 × 6\n   `NTD ID` Agency                                `UZA Name` Mode     UPT    VRM\n      &lt;int&gt; &lt;chr&gt;                                 &lt;chr&gt;      &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n 1        1 King County                           Seattle--… Bus   5.40e7 6.16e7\n 2        1 King County                           Seattle--… Dema… 6.63e5 1.29e7\n 3        1 King County                           Seattle--… Ferr… 4.00e5 5.12e4\n 4        1 King County                           Seattle--… Stre… 1.12e6 1.80e5\n 5        1 King County                           Seattle--… Trol… 9.58e6 2.64e6\n 6        1 King County                           Seattle--… Vanp… 7.03e5 4.41e6\n 7        2 Spokane Transit Authority             Spokane, … Bus   6.60e6 6.49e6\n 8        2 Spokane Transit Authority             Spokane, … Dema… 3.10e5 4.04e6\n 9        2 Spokane Transit Authority             Spokane, … Vanp… 9.06e4 9.06e5\n10        3 Pierce County Transportation Benefit… Seattle--… Bus   4.95e6 4.23e6\n# ℹ 1,131 more rows\n\ndistinct(FINANCIALS)\n\n# A tibble: 1,173 × 5\n   `NTD ID` `Agency Name`                           Mode  `Total Fares` Expenses\n      &lt;dbl&gt; &lt;chr&gt;                                   &lt;chr&gt;         &lt;dbl&gt;    &lt;dbl&gt;\n 1        1 King County Department of Metro Transit Comm…       5216912   0     \n 2        1 King County Department of Metro Transit Dema…        832327   6.05e7\n 3        1 King County Department of Metro Transit Ferr…       1715265   8.90e6\n 4        1 King County Department of Metro Transit Ligh…      29386480   0     \n 5        1 King County Department of Metro Transit Bus        56846337   6.72e8\n 6        1 King County Department of Metro Transit Stre…        588495   1.25e7\n 7        1 King County Department of Metro Transit Trol…      10123486   8.42e7\n 8        1 King County Department of Metro Transit Vanp…       5484481   8.91e6\n 9        2 Spokane Transit Authority               Dema…        531284   1.80e7\n10        2 Spokane Transit Authority               Bus         6135110   7.53e7\n# ℹ 1,163 more rows\n\nUSAGE_AND_FINANCIALS &lt;- left_join(USAGE_2022_ANNUAL, \n                                  FINANCIALS, \n                                  join_by(`NTD ID`, Mode)) |&gt;\n  drop_na()\nUSAGE_AND_FINANCIALS\n\n# A tibble: 1,132 × 9\n   `NTD ID` Agency    `UZA Name` Mode     UPT    VRM `Agency Name` `Total Fares`\n      &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;                 &lt;dbl&gt;\n 1        1 King Cou… Seattle--… Bus   5.40e7 6.16e7 King County …      56846337\n 2        1 King Cou… Seattle--… Dema… 6.63e5 1.29e7 King County …        832327\n 3        1 King Cou… Seattle--… Ferr… 4.00e5 5.12e4 King County …       1715265\n 4        1 King Cou… Seattle--… Stre… 1.12e6 1.80e5 King County …        588495\n 5        1 King Cou… Seattle--… Trol… 9.58e6 2.64e6 King County …      10123486\n 6        1 King Cou… Seattle--… Vanp… 7.03e5 4.41e6 King County …       5484481\n 7        2 Spokane … Spokane, … Bus   6.60e6 6.49e6 Spokane Tran…       6135110\n 8        2 Spokane … Spokane, … Dema… 3.10e5 4.04e6 Spokane Tran…        531284\n 9        2 Spokane … Spokane, … Vanp… 9.06e4 9.06e5 Spokane Tran…        247718\n10        3 Pierce C… Seattle--… Bus   4.95e6 4.23e6 Pierce Count…       4356831\n# ℹ 1,122 more rows\n# ℹ 1 more variable: Expenses &lt;dbl&gt;\n\ncolnames(USAGE_AND_FINANCIALS)\n\n[1] \"NTD ID\"      \"Agency\"      \"UZA Name\"    \"Mode\"        \"UPT\"        \n[6] \"VRM\"         \"Agency Name\" \"Total Fares\" \"Expenses\"   \n\n\n##Task 6: Farebox Recovery Among Major Systems\nUsing the USAGE_AND_FINANCIALS table, answer the following questions:\n# 1.Which transit system (agency and mode) had the most UPT in 2022?\nUSAGE_AND_FINANCIALS|&gt; group_by(Agency, Mode) |&gt; summarize(total_UPT = sum(UPT, na.rm = TRUE)) |&gt; ungroup() |&gt; arrange(desc(total_UPT)) |&gt; slice_head(n = 1) #R1. The transit system that had the most UPT in 2022 was the MTA New York City Transit, #by the Heavy Rail mode, with a total of 1,793,073,801 trips.\n# 2.Which transit system (agency and mode) had the highest farebox recovery, #defined as the highest ratio of Total Fares to Expenses? USAGE_AND_FINANCIALS |&gt; group_by(Agency, Mode) |&gt; summarize( total_fares = sum(Total Fares, na.rm = TRUE), total_expenses = sum(Expenses, na.rm = TRUE) ) |&gt; mutate(farebox_recovery_ratio = total_fares / total_expenses) |&gt; ungroup() |&gt; arrange(desc(farebox_recovery_ratio)) |&gt; slice_head(n = 1)\n\n#R2 = The Transit System with the highest recovery ratio is The Transit Authority of Central Kentuchy, by Vanpool #with a recovery Ratio of \\$2.38 usd.\n\n\\# 3.Which transit system (agency and mode) has the lowest expenses per UPT? \\`\\`\\`{R} USAGE_AND_FINANCIALS\\|\\&gt; group_by(Agency, Mode) \\|\\&gt; summarize( total_expenses = sum(Expenses, na.rm = TRUE), total_UPT = sum(UPT, na.rm = TRUE)) \\|\\&gt; filter(total_UPT \\&gt;= 400000) \\|\\&gt; mutate (expenses_per_UPT = total_expenses/total_UPT)\\|\\&gt; ungroup() \\|\\&gt; arrange(expenses_per_UPT) \\|\\&gt; slice_head(n = 1)\n\n#R3. North Carolina State University is the agency with the lowest expenses per UPT, on the bus mode, #the expenses per UPT is only $1.18usdd.\n# 4.Which transit system (agency and mode) has the highest total fares per UPT?\n\nUSAGE_AND_FINANCIALS|&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(\n    total_fares1 = sum(`Total Fares`, na.rm = TRUE),\n    total_UPT = sum(UPT, na.rm = TRUE)) |&gt;\n  \n  mutate (total_fares_per_UPT = total_fares1/total_UPT)|&gt;\n  ungroup() |&gt;\n  arrange(desc(total_fares_per_UPT)) |&gt;\n  slice_head(n = 1)\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 1 × 5\n  Agency                Mode          total_fares1 total_UPT total_fares_per_UPT\n  &lt;chr&gt;                 &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;               &lt;dbl&gt;\n1 Altoona Metro Transit Demand Respo…        17163        26                660.\n\n\n#R4. The highest total fares per UPT is the Agency “Altoona Metro Transit” with the modality #of “Demand Response”, the total fares per UPT is $660 USD.\n# 5.Which transit system (agency and mode) has the lowest expenses per VRM? ``{R} USAGE_AND_FINANCIALS|&gt;   group_by(Agency, Mode) |&gt;   summarize(     total_expenses = sum(Expenses`, na.rm = TRUE), total_VRM = sum(VRM, na.rm = TRUE), total_UPT= sum(UPT, na.rm=TRUE)) |&gt; filter(total_UPT &gt;= 400000) |&gt; mutate (total_expenses_per_VRM = total_expenses/total_VRM)|&gt; ungroup() |&gt; arrange((total_expenses_per_VRM)) |&gt; slice_head(n = 1)\n#R5. Metropolitan Transportation Comission, Vanpool mode, is the transit system with the lowest expenses per VRM, with only $0.445USD\n\n\n  # 6.Which transit system (agency and mode) has the highest total fares per VRM?\n::: {.cell}\n\n```{.r .cell-code}\nUSAGE_AND_FINANCIALS|&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(\n    total_fares1 = sum(`Total Fares`, na.rm = TRUE),\n    total_VRM = sum(VRM, na.rm = TRUE)) |&gt;\n\n  mutate (total_fares_per_VRM = total_fares1/total_VRM)|&gt;\n  ungroup() |&gt;\n  arrange(desc(total_fares_per_VRM)) |&gt;\n  slice_head(n = 1)\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 1 × 5\n  Agency                        Mode  total_fares1 total_VRM total_fares_per_VRM\n  &lt;chr&gt;                         &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;               &lt;dbl&gt;\n1 Chicago Water Taxi (Wendella) Ferr…       142473       600                237.\n\n:::\n#R6. The highest total fares per VRM on transit agencies in the US is the Ferryboat from Chicago Water Taxi (Wendella), #the total fare per VRM is $237USD.\n`colnames(USAGE_AND_FINANCIALS)\n#Last question: The most efficient transit system in the country, in my opinion, is The Transit Authority of Central Kentucky by #Vanpool, which boasts the highest recovery ratio in the country at $2.38 USD. My basis for declaring this system efficient #is its high recovery cost, as indicated by the ratio, which could lead one to think that this transit #system is profitable. Nevertheless, Vanpool is a mode of transportation that could be slow due to external factors, such as traffic, accidents, and other road conditions."
  }
]